continue
start_time
start_time.between?(a.start_time, a.end_time)
a = availabilities.last
availabilities.any? { |a| start_time.between?(a.start_time, a.end_time) && end_time.between?(a.start_time, a.end_time) }
availabilities
continue
availabilities
continue
next
errors
next
specialist.availabilities.where(date: date)
specialist.availabilites.where(date: date)
continue
@appointment
continue
@appointment.treatments
@appointment.treatments << Treatment.where(id: tids)
Treatment.where(id: tids)
Appointment.where(id: tids)
tids = params[:appointment][:treatment_ids]
continue
tids.compact
Appointment.where(id: tids)
@appointment
tids = params[:appointment][:treatment_ids]
params[:appointment][:treatment_ids]
continue
@specialist
params[:specialist_id]
params[:appointment][:treatment_ids]
params[:treatment_ids]
params
params[:treatment_ids]
@appointment.treatments
Appointment
@appointment.errors.full_messages
@appointment.save
@appointment
continue
@specialist.errors.full_messages
@specialist.errors.fullmessages
@specialist.valid?
